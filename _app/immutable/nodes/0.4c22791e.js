import{s as Ge,n as ke,r as he,c as ae,o as Ye,d as Y,b as Qe,e as We,u as Xe,g as Ze,f as Pe,h as $e}from"../chunks/scheduler.2739a3c5.js";import{S as xe,i as Ke,g as m,s as k,h as g,j as C,x as I,c as y,f as h,k as b,a as R,y as u,z as q,A as W,m as U,n as B,B as ie,o as ee,e as ye,r as et,u as tt,v as lt,d as se,t as ce,b as nt,w as st,C as Te,p as ot}from"../chunks/index.2bd5a6d6.js";import{c as F,a as fe,l as at,t as le}from"../chunks/lastParsedTable.0a3d396e.js";import{e as x,G as it,f as Le}from"../chunks/constants.062dce11.js";import{p as rt}from"../chunks/stores.ea3da2a9.js";import{S as oe,n as dt,a as Ne}from"../chunks/index.194e901b.js";const ut=!0,kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ut},Symbol.toStringTag,{value:"Module"}));function Oe(i,s,r){const t=i.slice();return t[20]=s[r],t}function Ee(i,s,r){const t=i.slice();return t[23]=s[r],t}function Re(i,s,r){const t=i.slice();return t[26]=s[r],t}function Ie(i,s,r){const t=i.slice();return t[29]=s[r],t}function Se(i,s,r){const t=i.slice();return t[32]=s[r],t}function De(i){let s,r,t,d=x(i[2]),l=[];for(let n=0;n<d.length;n+=1)l[n]=Ue(Se(i,d,n));return{c(){s=m("div"),r=U(`Previously Submitted Issues:
				`),t=m("div");for(let n=0;n<l.length;n+=1)l[n].c()},l(n){s=g(n,"DIV",{});var a=C(s);r=B(a,`Previously Submitted Issues:
				`),t=g(a,"DIV",{});var e=C(t);for(let o=0;o<l.length;o+=1)l[o].l(e);e.forEach(h),a.forEach(h)},m(n,a){R(n,s,a),u(s,r),u(s,t);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(n,a){if(a[0]&4){d=x(n[2]);let e;for(e=0;e<d.length;e+=1){const o=Se(n,d,e);l[e]?l[e].p(o,a):(l[e]=Ue(o),l[e].c(),l[e].m(t,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=d.length}},d(n){n&&h(s),ie(l,n)}}}function Ue(i){let s,r,t,d=i[32]+"",l,n,a,e,o,c="Discard",p,N,O;function L(){return i[9](i[32])}return{c(){s=m("div"),r=m("div"),t=m("a"),l=U(d),a=k(),e=m("div"),o=m("button"),o.textContent=c,p=k(),this.h()},l(w){s=g(w,"DIV",{class:!0});var f=C(s);r=g(f,"DIV",{class:!0});var E=C(r);t=g(E,"A",{href:!0});var T=C(t);l=B(T,d),T.forEach(h),E.forEach(h),a=y(f),e=g(f,"DIV",{});var K=C(e);o=g(K,"BUTTON",{class:!0,"data-svelte-h":!0}),I(o)!=="svelte-n51t1l"&&(o.textContent=c),K.forEach(h),p=y(f),f.forEach(h),this.h()},h(){b(t,"href",n=i[32]),b(r,"class",""),b(o,"class","btn btn-xs btn-primary btn-outline"),b(s,"class","flex space-x-4")},m(w,f){R(w,s,f),u(s,r),u(r,t),u(t,l),u(s,a),u(s,e),u(e,o),u(s,p),N||(O=q(o,"click",W(L)),N=!0)},p(w,f){i=w,f[0]&4&&d!==(d=i[32]+"")&&ee(l,d),f[0]&4&&n!==(n=i[32])&&b(t,"href",n)},d(w){w&&h(s),N=!1,O()}}}function Be(i){let s,r,t,d,l=i[3].newRows.length>0&&Ve(i),n=i[3].newColumns.length>0&&Me(i),a=i[3].changedRows.length>0&&Fe(i),e=i[3].newLeaderboards.length>0&&qe(i);return{c(){l&&l.c(),s=k(),n&&n.c(),r=k(),a&&a.c(),t=k(),e&&e.c(),d=ye()},l(o){l&&l.l(o),s=y(o),n&&n.l(o),r=y(o),a&&a.l(o),t=y(o),e&&e.l(o),d=ye()},m(o,c){l&&l.m(o,c),R(o,s,c),n&&n.m(o,c),R(o,r,c),a&&a.m(o,c),R(o,t,c),e&&e.m(o,c),R(o,d,c)},p(o,c){o[3].newRows.length>0?l?l.p(o,c):(l=Ve(o),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null),o[3].newColumns.length>0?n?n.p(o,c):(n=Me(o),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null),o[3].changedRows.length>0?a?a.p(o,c):(a=Fe(o),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),o[3].newLeaderboards.length>0?e?e.p(o,c):(e=qe(o),e.c(),e.m(d.parentNode,d)):e&&(e.d(1),e=null)},d(o){o&&(h(s),h(r),h(t),h(d)),l&&l.d(o),n&&n.d(o),a&&a.d(o),e&&e.d(o)}}}function Ve(i){let s,r,t,d=x(i[3].newRows),l=[];for(let n=0;n<d.length;n+=1)l[n]=je(Ie(i,d,n));return{c(){s=m("div"),r=U(`New Rows:
						`),t=m("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){s=g(n,"DIV",{class:!0});var a=C(s);r=B(a,`New Rows:
						`),t=g(a,"UL",{});var e=C(t);for(let o=0;o<l.length;o+=1)l[o].l(e);e.forEach(h),a.forEach(h),this.h()},h(){b(s,"class","my-10")},m(n,a){R(n,s,a),u(s,r),u(s,t);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(n,a){if(a[0]&184){d=x(n[3].newRows);let e;for(e=0;e<d.length;e+=1){const o=Ie(n,d,e);l[e]?l[e].p(o,a):(l[e]=je(o),l[e].c(),l[e].m(t,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=d.length}},d(n){n&&h(s),ie(l,n)}}}function je(i){let s,r=i[29].dataset+"",t,d,l,n="Expand",a,e,o="Undo",c,p,N;function O(){return i[10](i[29])}function L(){return i[11](i[29])}return{c(){s=m("li"),t=U(r),d=U(` -
									`),l=m("button"),l.textContent=n,a=k(),e=m("button"),e.textContent=o,c=k(),this.h()},l(w){s=g(w,"LI",{});var f=C(s);t=B(f,r),d=B(f,` -
									`),l=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),I(l)!=="svelte-1flhmru"&&(l.textContent=n),a=y(f),e=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-15bg0fc"&&(e.textContent=o),c=y(f),f.forEach(h),this.h()},h(){b(l,"class","btn btn-info btn-xs"),b(e,"class","btn btn-error btn-xs")},m(w,f){R(w,s,f),u(s,t),u(s,d),u(s,l),u(s,a),u(s,e),u(s,c),p||(N=[q(l,"click",W(O)),q(e,"click",W(L))],p=!0)},p(w,f){i=w,f[0]&8&&r!==(r=i[29].dataset+"")&&ee(t,r)},d(w){w&&h(s),p=!1,he(N)}}}function Me(i){let s,r,t,d=x(i[3].newColumns),l=[];for(let n=0;n<d.length;n+=1)l[n]=He(Re(i,d,n));return{c(){s=m("div"),r=U(`New Columns:
						`),t=m("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){s=g(n,"DIV",{class:!0});var a=C(s);r=B(a,`New Columns:
						`),t=g(a,"UL",{});var e=C(t);for(let o=0;o<l.length;o+=1)l[o].l(e);e.forEach(h),a.forEach(h),this.h()},h(){b(s,"class","my-10")},m(n,a){R(n,s,a),u(s,r),u(s,t);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(n,a){if(a[0]&56){d=x(n[3].newColumns);let e;for(e=0;e<d.length;e+=1){const o=Re(n,d,e);l[e]?l[e].p(o,a):(l[e]=He(o),l[e].c(),l[e].m(t,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=d.length}},d(n){n&&h(s),ie(l,n)}}}function He(i){let s,r=i[26].dataset+"",t,d,l=i[26].column+"",n,a,e=i[26].numerical?"Numerical":"Non-Numerical",o,c,p,N="Undo",O,L,w;function f(){return i[12](i[26])}return{c(){s=m("li"),t=U(r),d=U(" - "),n=U(l),a=U(" - "),o=U(e),c=k(),p=m("button"),p.textContent=N,O=k(),this.h()},l(E){s=g(E,"LI",{});var T=C(s);t=B(T,r),d=B(T," - "),n=B(T,l),a=B(T," - "),o=B(T,e),c=y(T),p=g(T,"BUTTON",{class:!0,"data-svelte-h":!0}),I(p)!=="svelte-i7mejg"&&(p.textContent=N),O=y(T),T.forEach(h),this.h()},h(){b(p,"class","btn btn-xs btn-error")},m(E,T){R(E,s,T),u(s,t),u(s,d),u(s,n),u(s,a),u(s,o),u(s,c),u(s,p),u(s,O),L||(w=q(p,"click",W(f)),L=!0)},p(E,T){i=E,T[0]&8&&r!==(r=i[26].dataset+"")&&ee(t,r),T[0]&8&&l!==(l=i[26].column+"")&&ee(n,l),T[0]&8&&e!==(e=i[26].numerical?"Numerical":"Non-Numerical")&&ee(o,e)},d(E){E&&h(s),L=!1,w()}}}function Fe(i){let s,r,t,d=x(i[3].changedRows),l=[];for(let n=0;n<d.length;n+=1)l[n]=Je(Ee(i,d,n));return{c(){s=m("div"),r=U(`Changed Rows:
						`),t=m("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){s=g(n,"DIV",{class:!0});var a=C(s);r=B(a,`Changed Rows:
						`),t=g(a,"UL",{});var e=C(t);for(let o=0;o<l.length;o+=1)l[o].l(e);e.forEach(h),a.forEach(h),this.h()},h(){b(s,"class","my-10")},m(n,a){R(n,s,a),u(s,r),u(s,t);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(n,a){if(a[0]&248){d=x(n[3].changedRows);let e;for(e=0;e<d.length;e+=1){const o=Ee(n,d,e);l[e]?l[e].p(o,a):(l[e]=Je(o),l[e].c(),l[e].m(t,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=d.length}},d(n){n&&h(s),ie(l,n)}}}function Je(i){let s,r=i[23].dataset+"",t,d,l,n="Expand",a,e,o="Undo",c,p,N;function O(){return i[13](i[23])}function L(){return i[14](i[23])}return{c(){s=m("li"),t=U(r),d=U(` -
									`),l=m("button"),l.textContent=n,a=k(),e=m("button"),e.textContent=o,c=k(),this.h()},l(w){s=g(w,"LI",{});var f=C(s);t=B(f,r),d=B(f,` -
									`),l=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),I(l)!=="svelte-1uoli8g"&&(l.textContent=n),a=y(f),e=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-zny8qg"&&(e.textContent=o),c=y(f),f.forEach(h),this.h()},h(){b(l,"class","btn btn-info btn-xs"),b(e,"class","btn btn-error btn-xs")},m(w,f){R(w,s,f),u(s,t),u(s,d),u(s,l),u(s,a),u(s,e),u(s,c),p||(N=[q(l,"click",W(O)),q(e,"click",W(L))],p=!0)},p(w,f){i=w,f[0]&8&&r!==(r=i[23].dataset+"")&&ee(t,r)},d(w){w&&h(s),p=!1,he(N)}}}function qe(i){let s,r,t,d=x(i[3].newLeaderboards),l=[];for(let n=0;n<d.length;n+=1)l[n]=ze(Oe(i,d,n));return{c(){s=m("div"),r=U(`New Leaderboards:
						`),t=m("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){s=g(n,"DIV",{class:!0});var a=C(s);r=B(a,`New Leaderboards:
						`),t=g(a,"UL",{});var e=C(t);for(let o=0;o<l.length;o+=1)l[o].l(e);e.forEach(h),a.forEach(h),this.h()},h(){b(s,"class","my-10")},m(n,a){R(n,s,a),u(s,r),u(s,t);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(n,a){if(a[0]&25){d=x(n[3].newLeaderboards);let e;for(e=0;e<d.length;e+=1){const o=Oe(n,d,e);l[e]?l[e].p(o,a):(l[e]=ze(o),l[e].c(),l[e].m(t,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=d.length}},d(n){n&&h(s),ie(l,n)}}}function ze(i){let s,r=i[20].dataset+"",t,d,l,n="Raw Table Data",a,e,o="Undo",c,p,N;function O(){return i[15](i[20])}function L(){return i[16](i[20])}return{c(){s=m("li"),t=U(r),d=U(` -
									`),l=m("button"),l.textContent=n,a=k(),e=m("button"),e.textContent=o,c=k(),this.h()},l(w){s=g(w,"LI",{});var f=C(s);t=B(f,r),d=B(f,` -
									`),l=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),I(l)!=="svelte-1u4ulcq"&&(l.textContent=n),a=y(f),e=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-1sbtwq4"&&(e.textContent=o),c=y(f),f.forEach(h),this.h()},h(){b(l,"class","btn btn-xs btn-info"),b(e,"class","btn btn-xs btn-error")},m(w,f){R(w,s,f),u(s,t),u(s,d),u(s,l),u(s,a),u(s,e),u(s,c),p||(N=[q(l,"click",W(O)),q(e,"click",W(L))],p=!0)},p(w,f){i=w,f[0]&8&&r!==(r=i[20].dataset+"")&&ee(t,r)},d(w){w&&h(s),p=!1,he(N)}}}function ct(i){let s,r,t,d,l="Your Changes",n,a,e="Discard all changes",o,c,p,N,O,L,w="Submit",f,E,T="<button>close</button>",K,J,H,X,_="Are you sure?",v,V,S="Do you want to discard <b>all</b> your changes? This cannot be undone.",z,Q,G,ne="Yes",_e,$,be="No",me,Z,we="<button>close</button>",ge,pe,j=i[2]&&i[2].length>0&&De(i),M=i[3]&&Be(i);return{c(){s=m("dialog"),r=m("form"),t=m("div"),d=m("h3"),d.textContent=l,n=k(),a=m("button"),a.textContent=e,o=k(),j&&j.c(),c=k(),p=m("div"),M&&M.c(),N=k(),O=m("div"),L=m("button"),L.textContent=w,f=k(),E=m("form"),E.innerHTML=T,K=k(),J=m("dialog"),H=m("form"),X=m("h3"),X.textContent=_,v=k(),V=m("p"),V.innerHTML=S,z=k(),Q=m("div"),G=m("button"),G.textContent=ne,_e=k(),$=m("button"),$.textContent=be,me=k(),Z=m("form"),Z.innerHTML=we,this.h()},l(D){s=g(D,"DIALOG",{id:!0,class:!0});var A=C(s);r=g(A,"FORM",{method:!0,class:!0});var P=C(r);t=g(P,"DIV",{class:!0});var re=C(t);d=g(re,"H3",{class:!0,"data-svelte-h":!0}),I(d)!=="svelte-l0kkzd"&&(d.textContent=l),n=y(re),a=g(re,"BUTTON",{class:!0,"data-svelte-h":!0}),I(a)!=="svelte-1wj7p38"&&(a.textContent=e),re.forEach(h),o=y(P),j&&j.l(P),c=y(P),p=g(P,"DIV",{});var ve=C(p);M&&M.l(ve),ve.forEach(h),N=y(P),O=g(P,"DIV",{class:!0});var Ce=C(O);L=g(Ce,"BUTTON",{class:!0,"data-svelte-h":!0}),I(L)!=="svelte-1awmwt0"&&(L.textContent=w),Ce.forEach(h),P.forEach(h),f=y(A),E=g(A,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),I(E)!=="svelte-5gpmjx"&&(E.innerHTML=T),A.forEach(h),K=y(D),J=g(D,"DIALOG",{id:!0,class:!0});var de=C(J);H=g(de,"FORM",{method:!0,class:!0});var te=C(H);X=g(te,"H3",{class:!0,"data-svelte-h":!0}),I(X)!=="svelte-17aako"&&(X.textContent=_),v=y(te),V=g(te,"P",{class:!0,"data-svelte-h":!0}),I(V)!=="svelte-r6ov24"&&(V.innerHTML=S),z=y(te),Q=g(te,"DIV",{class:!0});var ue=C(Q);G=g(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),I(G)!=="svelte-145w5b"&&(G.textContent=ne),_e=y(ue),$=g(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),I($)!=="svelte-1h1j03q"&&($.textContent=be),ue.forEach(h),te.forEach(h),me=y(de),Z=g(de,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),I(Z)!=="svelte-5gpmjx"&&(Z.innerHTML=we),de.forEach(h),this.h()},h(){b(d,"class","font-bold text-lg"),b(a,"class","btn btn-warning btn-sm"),b(t,"class","flex justify-between"),b(L,"class","btn btn-primary"),b(O,"class","flex justify-center"),b(r,"method","dialog"),b(r,"class","modal-box w-11/12 max-w-5xl"),b(E,"method","dialog"),b(E,"class","modal-backdrop"),b(s,"id","your-changes-dialog"),b(s,"class","modal"),b(X,"class","font-bold text-lg"),b(V,"class","py-4"),b(G,"class","btn btn-sm btn-error"),b($,"class","btn btn-sm btn-secondary"),b(Q,"class","flex justify-evenly"),b(H,"method","dialog"),b(H,"class","modal-box"),b(Z,"method","dialog"),b(Z,"class","modal-backdrop"),b(J,"id","are-you-sure-discard"),b(J,"class","modal")},m(D,A){R(D,s,A),u(s,r),u(r,t),u(t,d),u(t,n),u(t,a),u(r,o),j&&j.m(r,null),u(r,c),u(r,p),M&&M.m(p,null),u(r,N),u(r,O),u(O,L),u(s,f),u(s,E),i[18](s),R(D,K,A),R(D,J,A),u(J,H),u(H,X),u(H,v),u(H,V),u(H,z),u(H,Q),u(Q,G),u(Q,_e),u(Q,$),u(J,me),u(J,Z),ge||(pe=[q(a,"click",W(i[8])),q(L,"click",i[17]),q(G,"click",i[19])],ge=!0)},p(D,A){D[2]&&D[2].length>0?j?j.p(D,A):(j=De(D),j.c(),j.m(r,c)):j&&(j.d(1),j=null),D[3]?M?M.p(D,A):(M=Be(D),M.c(),M.m(p,null)):M&&(M.d(1),M=null)},i:ke,o:ke,d(D){D&&(h(s),h(K),h(J)),j&&j.d(),M&&M.d(),i[18](null),ge=!1,he(pe)}}}function ft(i,s,r){let t,d,l,n;ae(i,F,_=>r(3,t=_)),ae(i,rt,_=>r(4,d=_)),ae(i,fe,_=>r(5,l=_)),ae(i,at,_=>r(6,n=_));let a,e,o=[];async function c(_){let v=JSON.parse(JSON.stringify(_)),V=Object.keys(v),S="";V.forEach(z=>{z!=="id"&&(S+=`<div>${z}</div> <div>${v[z]}</div>`)}),await oe.fire({title:"Row",html:`<div class="grid grid-cols-2">
												${S}</div>`.replace(/,/g,""),target:a,showClass:{popup:"animate__animated animate__fadeIn animate__faster"},hideClass:{popup:"animate__animated animate__fadeOut animate__faster"},position:"top"})}Ye(()=>{r(2,o=JSON.parse(localStorage.getItem("pr-issues")??"[]")||[])});const p=()=>{le("are-you-sure-discard")},N=_=>{r(2,o=o.filter(v=>v!==_)),localStorage.setItem("pr-issues",JSON.stringify(o))},O=async _=>{c(_.row)},L=_=>{if(t){if(console.log("Deleting new row"),(_.dataset===d.params.db+"/"+d.params.dataset||d.route.id==="/systems"&&_.dataset==="systems")&&l!==null){let v=l.getRow(_.row.id);v!==void 0&&(console.log("Found row to delete",v),l.deleteRow(v),l.redraw(!0),fe.set(l))}Y(F,t.newRows=t.newRows.filter(v=>v!==_),t),Y(F,t.lastChange="row deleted",t),t.changedRows.length===0&&t.newRows.length===0&&t.newColumns.length===0&&t.newLeaderboards.length===0&&le("your-changes-dialog")}},w=_=>{console.log("Deleting new column"),(_.dataset===d.params.db+"/"+d.params.dataset||d.route.id==="/systems"&&_.dataset==="systems")&&l!==null&&(l.deleteColumn(_.column),l.redraw(!0),fe.set(l),t!==null&&(Y(F,t.newColumns=t==null?void 0:t.newColumns.filter(v=>v!==_),t),Y(F,t.lastChange="column deleted",t))),(t==null?void 0:t.changedRows.length)===0&&(t==null?void 0:t.newRows.length)===0&&(t==null?void 0:t.newColumns.length)===0&&(t==null?void 0:t.newLeaderboards.length)===0&&le("your-changes-dialog")},f=async _=>{c(_.row)},E=_=>{if(t){if(console.log("Deleting changed row"),(_.dataset===d.params.db+"/"+d.params.dataset||d.route.id==="/systems"&&_.dataset==="systems")&&l!==null){let v=l.getRow(_.row.id);if(v!==void 0){console.log("Found row to revert");let V=n.find(S=>S.id===v.getIndex());V!==void 0&&(console.log("Found original row",V),l==null||l.updateData([V]),l.redraw(!0),fe.set(l))}}Y(F,t.changedRows=t.changedRows.filter(v=>v!==_),t),Y(F,t.lastChange="row reverted",t),t.changedRows.length===0&&t.newRows.length===0&&t.newColumns.length===0&&t.newLeaderboards.length===0&&le("your-changes-dialog")}},T=async _=>{await oe.fire({title:"New Table",html:`<div> ${_.data} </div>`,target:a,showClass:{popup:"animate__animated animate__fadeIn animate__faster"},hideClass:{popup:"animate__animated animate__fadeOut animate__faster"},position:"top"})},K=_=>{t&&(console.log("Deleting new leaderboard"),_.dataset===d.params.db+"/"+d.params.dataset?(Y(F,t.newLeaderboards=t.newLeaderboards.filter(v=>v.dataset!==_.dataset),t),Y(F,t.lastChange="leaderboard deleted",t),window.location.reload()):(Y(F,t.newLeaderboards=t.newLeaderboards.filter(v=>v.dataset!==_.dataset),t),Y(F,t.lastChange="leaderboard deleted",t)),t.changedRows.length===0&&t.newRows.length===0&&t.newColumns.length===0&&t.newLeaderboards.length===0&&le("your-changes-dialog"))},J=async()=>{oe.fire({title:"Give a title to your changes",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:_=>{_===""&&oe.showValidationMessage("Title cannot be empty")},allowOutsideClick:()=>!oe.isLoading()}).then(async _=>{var v,V;if(_.isConfirmed){r(1,e={}),r(1,e.newColumns=t==null?void 0:t.newColumns,e),r(1,e.newLeaderboards=t==null?void 0:t.newLeaderboards,e),r(1,e.newRows=[],e),r(1,e.changedRows=[],e),(v=t==null?void 0:t.newRows)==null||v.forEach(S=>{console.log(S.row),e.newRows.push({dataset:S.dataset,row:S.row})}),(V=t==null?void 0:t.changedRows)==null||V.forEach(S=>{console.log(S.row),e.changedRows.push({dataset:S.dataset,row:S.row})});try{let z=await(await fetch(it,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:_.value,newColumns:e.newColumns,newRows:e.newRows,changedRows:e.changedRows,newLeaderboards:e.newLeaderboards})})).json();if(console.log(z),z.status==="success"){dt("Success","Your changes have been submitted as an issue. You can track the progress of your changes on GitHub.");let G=JSON.parse(z.response).html_url,ne=localStorage.getItem("pr-issues");r(2,o=ne?JSON.parse(ne):[]),o.push(G),localStorage.setItem("pr-issues",JSON.stringify(o))}else Ne("Error","Something went wrong while submitting your changes.")}catch{Ne("Error","Something went wrong while submitting your changes.")}}})};function H(_){Qe[_?"unshift":"push"](()=>{a=_,r(0,a)})}return[a,e,o,t,d,l,n,c,p,N,O,L,w,f,E,T,K,J,H,()=>{localStorage.removeItem("pr-changes"),window.location.reload()}]}class ht extends xe{constructor(s){super(),Ke(this,s,ft,ct,Ge,{},null,[-1,-1])}}function Ae(i){let s,r="Your Changes",t,d,l,n;return{c(){s=m("button"),s.textContent=r,this.h()},l(a){s=g(a,"BUTTON",{class:!0,"data-svelte-h":!0}),I(s)!=="svelte-1w47kw6"&&(s.textContent=r),this.h()},h(){b(s,"class","btn")},m(a,e){R(a,s,e),d=!0,l||(n=q(s,"click",i[3]),l=!0)},i(a){d||(a&&$e(()=>{d&&(t||(t=Te(s,Le,{},!0)),t.run(1))}),d=!0)},o(a){a&&(t||(t=Te(s,Le,{},!1)),t.run(0)),d=!1},d(a){a&&h(s),a&&t&&t.end(),l=!1,n()}}}function _t(i){let s,r,t,d,l,n=i[0]&&(i[0].newColumns.length>0||i[0].newRows.length>0||i[0].newLeaderboards.length>0||i[0].changedRows.length>0)&&Ae(i);const a=i[2].default,e=We(a,i,i[1],null);return d=new ht({}),{c(){s=m("div"),n&&n.c(),r=k(),e&&e.c(),t=k(),et(d.$$.fragment),this.h()},l(o){s=g(o,"DIV",{class:!0});var c=C(s);n&&n.l(c),c.forEach(h),r=y(o),e&&e.l(o),t=y(o),tt(d.$$.fragment,o),this.h()},h(){b(s,"class","fixed top-10 right-10")},m(o,c){R(o,s,c),n&&n.m(s,null),R(o,r,c),e&&e.m(o,c),R(o,t,c),lt(d,o,c),l=!0},p(o,[c]){o[0]&&(o[0].newColumns.length>0||o[0].newRows.length>0||o[0].newLeaderboards.length>0||o[0].changedRows.length>0)?n?c&1&&se(n,1):(n=Ae(o),n.c(),se(n,1),n.m(s,null)):n&&(ot(),ce(n,1,1,()=>{n=null}),nt()),e&&e.p&&(!l||c&2)&&Xe(e,a,o,o[1],l?Pe(a,o[1],c,null):Ze(o[1]),null)},i(o){l||(se(n),se(e,o),se(d.$$.fragment,o),l=!0)},o(o){ce(n),ce(e,o),ce(d.$$.fragment,o),l=!1},d(o){o&&(h(s),h(r),h(t)),n&&n.d(),e&&e.d(o),st(d,o)}}}function mt(i,s,r){let t;ae(i,F,a=>r(0,t=a));let{$$slots:d={},$$scope:l}=s;Ye(()=>{let a=localStorage.getItem("pr-changes");if(a){console.log("Found 'pr-changes' cookie, setting currentPRChanges");let e=JSON.parse(a);e.lastChange=null,F.set(e)}});const n=()=>{le("your-changes-dialog")};return i.$$set=a=>{"$$scope"in a&&r(1,l=a.$$scope)},[t,l,d,n]}class yt extends xe{constructor(s){super(),Ke(this,s,mt,_t,Ge,{})}}export{yt as component,kt as universal};
